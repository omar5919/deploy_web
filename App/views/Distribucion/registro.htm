<style>
    @keyframes progress-bar-stripes {
        from {
            background-position: 1rem 0;
        }
        to {
            background-position: 0 0;
        }
    }

    .progress {
        display: flex;
        height: 2rem;
        overflow: hidden;
        font-size: 0.75rem;
        background-color: #e9ecef;
        border-radius: 1.25rem;
    }

    .progress-bar {
        display: flex;
        flex-direction: column;
        justify-content: center;
        color: #fff;
        text-align: center;
        white-space: nowrap;
        background-color: #007bff;
        transition: width 0.6s ease;
    }

    @media screen and (prefers-reduced-motion: reduce) {
        .progress-bar {
            transition: none;
        }
    }

    .progress-bar-striped {
        background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
        background-size: 1rem 1rem;
    }

    .progress-bar-animated {
        animation: progress-bar-stripes 1s linear infinite;
    }

    td {
        text-align: center;
    }
</style>
<script type="text/ng-template" id="ordenEntrega.html">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" ng-click="cerrarOrdenEntrega()">
                <span aria-hidden="true">&times;</span>
                <span class="sr-only">Close</span>
            </button>
            <h4 class="modal-title">Orden de Entrega {{oe.Codigo}}</h4>
            <small class="font-bold">Datos del ticket</small>
        </div>
        <div class="modal-body">
            <div class="row m-b-lg m-t-lg">
                <div class="col-md-12">
                    <div class="profile-info">
                        <div class="">
                            <div>
                                <h4>Datos de la Solicitud [{{oe.CodigoSolicitud}}] <small class="font-bold">Estado:
                                    {{oe.Estado}}</small></h4>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-lg-4 col-form-label">Agencia Origen:</label>
                        <div class="col-lg-8">
                            <input type="text" readonly class="form-control" ng-model="oe.Origen"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-lg-4 col-form-label">Agencia Destino:</label>
                        <div class="col-lg-8">
                            <input type="text" readonly class="form-control" ng-model="oe.Destino"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-lg-4 col-form-label">Dirección Destino:</label>
                        <div class="col-lg-8">
                            <input type="text" readonly class="form-control" ng-model="oe.DireccionDestino"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-lg-4 col-form-label">Departamento:</label>
                        <div class="col-lg-8">
                            <input type="text" readonly class="form-control" ng-model="oe.DepartamentoDestino"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-lg-4 col-form-label">Distrito:</label>
                        <div class="col-lg-8">
                            <input type="text" class="form-control" readonly ng-model="oe.DistritoDestino"/>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-lg-4 col-form-label">Solicitante:</label>
                        <div class="col-lg-8">
                            <input type="text" readonly class="form-control" ng-model="oe.Solicitante"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-lg-4 col-form-label">F.Estimada:</label>
                        <div class="col-lg-8">
                            <input type="text" readonly class="form-control" ng-model="oe.FechaEstimadaEntrega"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-lg-4 col-form-label">Zona:</label>
                        <div class="col-lg-8">
                            <input type="text" class="form-control" readonly ng-model="oe.Zonal"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-lg-4 col-form-label">Provincia:</label>
                        <div class="col-lg-8">
                            <input type="text" class="form-control" readonly ng-model="oe.ProvinciaDestino"/>
                        </div>
                    </div>
                </div>
            </div>
            <h4>DATOS DEL PROVEEDOR</h4>
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-lg-4 col-form-label">Fecha Registro:</label>
                        <div class="col-lg-8">
                            <input type="text" class="form-control" readonly ng-model="oe.FechaRegistro"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-lg-4 col-form-label">Fecha Proceso:</label>
                        <div class="col-lg-8">
                            <input type="text" class="form-control"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-lg-4 col-form-label">Fecha Despacho:</label>
                        <div class="col-lg-8">
                            <input type="text" class="form-control"/>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-lg-4 col-form-label">Nro. de Orden:</label>
                        <div class="col-lg-8">
                            <input type="text" class="form-control" readonly ng-model="oe.NumeroOrden"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-lg-4 col-form-label">Nro de GuÍa:</label>
                        <div class="col-lg-8">
                            <input type="text" class="form-control" readonly ng-model="oe.NumeroGuia"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-lg-4 col-form-label">Guía Remisión:</label>
                        <div class="col-lg-8">
                            <input type="text" class="form-control"/>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-lg-4 col-form-label">Servicio:</label>
                        <div class="col-lg-8">
                            <input type="text" class="form-control" readonly ng-model="oe.Servicio"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-lg-4 col-form-label">Bultos:</label>
                        <div class="col-lg-8">
                            <input type="text" class="form-control" readonly ng-model="oe.Bulto"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-lg-4 col-form-label">Peso:</label>
                        <div class="col-lg-8">
                            <input type="text" class="form-control" readonly ng-model="oe.Peso"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-lg-4 col-form-label">Fecha Sede:</label>
                        <div class="col-lg-8">
                            <input type="text" class="form-control"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-lg-4 col-form-label">Sede Origen:</label>
                        <div class="col-lg-8">
                            <input type="text" class="form-control"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-lg-4 col-form-label">Sede Destino:</label>
                        <div class="col-lg-8">
                            <input type="text" class="form-control"/>
                        </div>
                    </div>
                </div>
                <div class="col-md-8">
                    <div class="form-group row">
                        <label class="col-lg-4 col-form-label">Glosa:</label>
                        <div class="col-lg-8">
                            <input type="text" class="form-control" readonly ng-model="oe.Glosa"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-lg-4 col-form-label">Operación:</label>
                        <div class="col-lg-8">
                            <input type="text" class="form-control" readonly ng-model="oe.Operacion"/>
                        </div>
                    </div>
                </div>
            </div>
            <h4>SEGUIMIENTO DE LA ENTREGA</h4>
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-lg-4 col-form-label">Fecha de Visita:</label>
                        <div class="col-lg-8">
                            <input type="text" class="form-control" readonly ng-model="oe.FechaVisita"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-lg-4 col-form-label">Imagen:</label>
                        <div class="col-lg-8">
                            <input type="text" class="form-control" readonly ng-model="oe.Imagen"/>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-lg-4 col-form-label">Motivo:</label>
                        <div class="col-lg-8">
                            <input type="text" class="form-control" readonly ng-model="oe.Motivo"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <table class="table table-bordered">
                        <thead>
                        <tr>
                            <th>#</th>
                            <th>Destino</th>
                            <th>Descripción</th>
                            <th>Cantidad</th>
                            <th>Und.Med.</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="(key,x) in items">
                            <th scope="row">{{key + 1}}</th>
                            <td>{{oe.Destino}}</td>
                            <td>{{x.Item}}</td>
                            <td>{{x.Cantidad}}</td>
                            <td>{{x.UnidadMedida}}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-white" ng-click="cerrarOrdenEntrega()">Cerrar</button>
        </div>
    </div>
</script>
<div class="row">
    <div class="col-md-12">
        <div class="ibox">
            <div class="ibox-title">
                <h5><span ng-show="cargando"><i class="fas fa-spinner fa-spin"></i></span> Solicitud de Distribución
                    <span>{{ticket.Codigo}}</span></h5>
                <div class="ibox-tools" ng-show="ticketId !== 0">
                    <span class="label label-warning-light float-right">{{ticket.Estado}}</span>
                </div>
            </div>
            <div class="ibox-content">
                <h5 ng-if="!bloquearTodo" style="color: red">{{mensajeBloqueo}}</h5>
                <div class="form-group row" ng-if="bloquearTodo">
                    <div class="col-lg-12">
                        <button type="button" ng-click="cerrar()" class="btn btn-sm btn-dark">CERRAR</button>
                        <button class="btn btn-sm btn-primary" ng-if="!ticket.Id" type="button" ng-click="grabar()">
                            ENVIAR
                        </button>
                        <button class="btn btn-sm btn-primary" ng-if="permisos.AprobarRechazar" type="button"
                                ng-click="aprobar()">APROBAR
                        </button>
                        <button class="btn btn-sm btn-primary" ng-if="permisos.AprobarRechazar" type="button"
                                ng-click="rechazar()">RECHAZAR
                        </button>
                        <button class="btn btn-sm btn-danger" type="button" ng-if="permisos.PermiteAnularTicket" ng-click="anular()">ANULAR
                        </button>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-5">
                        <div class="form-group row">
                            <label class="col-lg-2 col-form-label">Solicitante:</label>
                            <div class="col-lg-10">
                                <label>{{ticket.Id ? ticket.Solicitante : usr.Nombre + ' ' + usr.ApellidoPaterno}}</label>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-lg-2 col-form-label">Correo:</label>
                            <div class="col-lg-10">
                                <label>{{ticket.Id ? ticket.Email : usr.Email}}</label>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-lg-2 col-form-label">Telefono:</label>
                            <div class="col-lg-10">
                                <label>{{ticket.Id ? ticket.Celular : usr.Telefono}}</label>
                            </div>
                        </div>
                    </div>
                    <div ng-class="{'col-md-5': imagen_solicitante.length > 0 , 'col-md-7': imagen_solicitante.length === 0}">
                        <div class="form-group row">
                            <label class="col-lg-2 col-form-label">Fecha de Registro:</label>
                            <div class="col-lg-10">
                                <label>{{ticket.Id ? ticket.FechaRegistro : sol.disponibilidad | formatoFechaHoraPeru}}</label>
                            </div>
                        </div>
                        <div class="form-group row" ng-if="ticket.Id">
                            <label class="col-lg-2 col-form-label">Fecha Estimada Entrega:</label>
                            <div class="col-lg-10">
                                <label>{{ticket.Id ? ticket.FechaEstimadaAtencion : sol.disponibilidad | formatoFechaHoraPeru}}</label>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-lg-2 col-form-label">Sede / Agencia:</label>
                            <div class="col-lg-10">
                                <label>{{ticket.Id ? ticket.UbicacionSolicitante : usr.Direccion}}</label>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-2" ng-if="imagen_solicitante.length > 0">
                        <div class="form-group row">
                            <img ng-src="{{'data:image/png;base64,'+imagen_solicitante[0].arrArchivo}}" height="120px"
                                 width="120px"
                                 alt="..." class="img-circle center-block"/>
                        </div>
                    </div>
                </div>
                <div class="hr-line-dashed"></div>
                <uib-tabset>
                    <uib-tab index="0" heading="Datos Generales" select="generales()">
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-md-7">
                                    <div class="form-group">
                                        <label for="descripcion">Descripción de Items</label>
                                        <input id="descripcion"
                                               ng-model="sol.descripcion"
                                               ng-readonly="ticket.Id ? true : false"
                                               type="text"
                                               placeholder="Descripción de Items"
                                               class="form-control"
                                        >
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <div class="form-group">
                                        <label>Disponibilidad del Item</label>
                                        <input date-range-picker class="form-control date-picker"
                                               ng-readonly="ticket.Id ? true : false"
                                               options="{singleDatePicker: true,locale:{format:'DD/MM/YYYY'}}"
                                               type="text"
                                               ng-model="sol.disponibilidad"/>
                                    </div>
                                </div>
                                <div class="col-md-3" ng-show="ticket.Id">
                                    <div class="form-group">
                                        <label>Proveedor</label>
                                        <ui-select ng-model="sol.proveedor"
                                                   on-select="seleccionarProveedor($select.selected)">
                                            <ui-select-match placeholder="Seleccione Proveedor...">
                                                <span>{{$select.selected.Nombre}}</span>
                                            </ui-select-match>
                                            <ui-select-choices
                                                    repeat="i in (Proveedores | filter: $select.search) track by i.Id">
                                                <span ng-bind="i.Nombre"></span>
                                            </ui-select-choices>
                                        </ui-select>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-5">
                                    <div class="row">
                                        <div class="col-md-8">
                                            <div class="form-group">
                                                <label>Tipo de Servicio</label>
                                                <ui-select ng-model="sol.tiposervicio"
                                                           ng-disabled="ticket.Id ? true : false"
                                                           on-select="seleccionarTipoServicio($select.selected)">
                                                    <ui-select-match placeholder="Seleccione Tipo Servicio...">
                                                        <span>{{$select.selected.Nombre}}</span>
                                                    </ui-select-match>
                                                    <ui-select-choices
                                                            repeat="i in (TipoServios | filter: $select.search) track by i.Id">
                                                        <span ng-bind="i.Nombre"></span>
                                                    </ui-select-choices>
                                                </ui-select>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>Prioridad</label>
                                                <ui-select ng-model="sol.prioridad"
                                                           ng-disabled="ticket.Id ? true : false"
                                                           on-select="seleccionarPrioridad($select.selected)">
                                                    <ui-select-match placeholder="Seleccione Prioridad...">
                                                        <span>{{$select.selected.Nombre}}</span>
                                                    </ui-select-match>
                                                    <ui-select-choices
                                                            repeat="i in (Prioridad | filter: $select.search) track by i.Id">
                                                        <span ng-bind="i.Nombre"></span>
                                                    </ui-select-choices>
                                                </ui-select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-2"></div>
                                <div class="col-md-5">
                                    <div class="form-group">
                                        <label>Centro de Costo</label>
                                        <ui-select ng-model="sol.centrocosto"
                                                   ng-disabled="ticket.Id ? false : true"
                                                   on-select="seleccionarCentroCosto($select.selected)" readonly="true">
                                            <ui-select-match placeholder="Seleccione Centro Costo...">
                                                <span>{{$select.selected.Nombre}}</span>
                                            </ui-select-match>
                                            <ui-select-choices
                                                    repeat="i in (CentroCosto | filter: $select.search) track by i.Id">
                                                <span ng-bind="i.Nombre"></span>
                                            </ui-select-choices>
                                        </ui-select>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-5">
                                    <fieldset>
                                        <legend>Origen</legend>
                                        <div ng-show="!ticket.Id">
                                            <div class="form-group row">
                                                <label class="col-lg-2 col-form-label">Tipo Origen:</label>
                                                <div class="col-lg-10">
                                                    <ui-select ng-model="sol.origen"
                                                               ng-disabled="!sol.tiposervicio"
                                                               on-select="seleccionarOrigen($select.selected)">
                                                        <ui-select-match placeholder="Seleccione Origen...">
                                                            <span>{{$select.selected.Nombre}}</span>
                                                        </ui-select-match>
                                                        <ui-select-choices
                                                                repeat="i in (Origen | filter: $select.search) track by i.Id">
                                                            <span ng-bind="i.Nombre"></span>
                                                        </ui-select-choices>
                                                    </ui-select>
                                                </div>
                                            </div>
                                            <div class="form-group row" ng-show="sol.origen.Id !== 347">
                                                <label class="col-lg-2 col-form-label">Agencia Origen:</label>
                                                <div class="col-lg-10">
                                                    <ui-select ng-model="sol.sedeOrigen"
                                                               ng-disabled="AgenciaOrigen.length === 0"
                                                               on-select="seleccionarSedeOrigen($select.selected)">
                                                        <ui-select-match placeholder="Seleccione Ubicación Origen...">
                                                            <span>{{$select.selected.Nombre}}</span>
                                                        </ui-select-match>
                                                        <ui-select-choices
                                                                repeat="i in (AgenciaOrigen | filter: $select.search) track by i.Id">
                                                            <span ng-bind="i.Nombre"></span>
                                                        </ui-select-choices>
                                                    </ui-select>
                                                </div>
                                            </div>
                                            <div class="form-group row" ng-show="sol.origen.Id === 347">
                                                <label class="col-lg-2 col-form-label">Ubigeo Origen</label>
                                                <div class="col-lg-10">
                                                    <ui-select ng-model="sol.ubigeo_origen">
                                                        <ui-select-match placeholder="Seleccione Ubigeo...">
                                                            <span>{{$select.selected.Nombre}}</span>
                                                        </ui-select-match>
                                                        <ui-select-choices repeat="i in UbigeoOrigen track by $index"
                                                                           refresh="obtenerUbigeo($select.search,1)"
                                                                           refresh-delay="0">
                                                            <span ng-bind="i.Nombre"></span>
                                                        </ui-select-choices>
                                                    </ui-select>
                                                </div>
                                            </div>
                                            <div class="form-group row" ng-show="sol.sedeOrigen.Id === 0">
                                                <label class="col-lg-2 col-form-label">Plantilla Origen:</label>
                                                <div class="col-lg-10">
                                                    <div class="row">
                                                        <div class="file-box">
                                                            <div class="file">
                                                                <span class="corner"></span>
                                                                <a ng-click="agregarAdjOrigen()">
                                                                    <div class="icon">
                                                                        <i ng-class="{'fas fa-file-excel': plantillaOrigen === undefined ,'fas fa-times':plantillaOrigen.size > 2000000, 'fas fa-upload': plantillaOrigen.size < 2000000}"></i>
                                                                    </div>
                                                                </a>
                                                                <div class="file-name">
                                                                    {{plantillaOrigen ? plantillaOrigen.name : '--'}}
                                                                    <br/>
                                                                    <small>{{plantillaOrigen ? (plantillaOrigen.size | formatomb) : '--'}}</small>
                                                                    <div class="row" ng-show="plantillaOrigen">
                                                                        <div class="col-md-12">
                                                                            <button ng-show="plantillaOrigen.size < 2000000"
                                                                                    type="button"
                                                                                    ng-click="subirPlantilla(1)"
                                                                                    class="btn btn-edi">
                                                                                Subir <i class="fas fa-spinner fa-spin"
                                                                                         ng-show="subiendoOrigen"></i>
                                                                            </button>
                                                                            <button type="button" class="btn btn-red"
                                                                                    ng-click="borrarAdjOrigen()">Borrar
                                                                            </button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <input id="adjOrigen" type="file" file-model="plantillaOrigen"/>
                                                        <br/>
                                                        <button type="button" class="btn btn-edi"
                                                                ng-click="descargarPlantilla()"><i
                                                                class="fas fa-download"></i> Plantilla
                                                        </button>
                                                        <br/>
                                                        <div ng-show="mensajeCargaOrigen!=''">
                                                            {{mensajeCargaOrigen}} <span
                                                                ng-click="mensajeCargaOrigen=''"> (x)</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label for="direccionOrigen" class="col-lg-2 col-form-label">Dirección
                                                    Origen:</label>
                                                <div class="col-lg-10">
                                                <textarea id="direccionOrigen" class="form-control"
                                                          ng-model="sol.direccion_origen"
                                                          placeholder="Dirección Origen"
                                                          ng-disabled="sol.origen.Id !== 347" rows="2"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                        <div slimscroll="{height:'150px'}" ng-if="ticket.Id">
                                            <div class="well" ng-repeat="x in origen_list">
                                                {{x.Origen}} <br/>
                                                {{x.DireccionOrigen}} <br/>
                                                {{x.UbigeoOrigen}}
                                            </div>
                                        </div>
                                    </fieldset>
                                </div>
                                <div class="col-md-2" style="text-align: center;line-height: 150px;">
                                    <i class="fas fa-arrow-right fa-4x" style="color: #2c699b;"></i>
                                </div>
                                <div class="col-md-5">
                                    <fieldset>
                                        <legend>Destino</legend>
                                        <div ng-show="!ticket.Id">
                                            <div class="form-group row">
                                                <label class="col-lg-2 col-form-label">Tipo Destino:</label>
                                                <div class="col-lg-10">
                                                    <ui-select ng-model="sol.destino"
                                                               ng-disabled="!sol.origen"
                                                               on-select="seleccionarDestino($select.selected)">
                                                        <ui-select-match placeholder="Seleccione Destino...">
                                                            <span>{{$select.selected.Nombre}}</span>
                                                        </ui-select-match>
                                                        <ui-select-choices
                                                                repeat="i in (Destino | filter: $select.search) track by i.Id"
                                                                ui-disable-choice="i.disabled">
                                                            <span ng-bind="i.Nombre"></span>
                                                        </ui-select-choices>
                                                    </ui-select>
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label class="col-lg-2 col-form-label">Agencia Destino:</label>
                                                <div class="col-lg-10">
                                                    <ui-select ng-model="sol.sedeDestino"
                                                               ng-disabled="AgenciaDestino.length === 0"
                                                               on-select="seleccionarSedeDestino($select.selected)">
                                                        <ui-select-match placeholder="Seleccione Ubicación Destino...">
                                                            <span>{{$select.selected.Nombre}}</span>
                                                        </ui-select-match>
                                                        <ui-select-choices
                                                                repeat="i in (AgenciaDestino | filter: $select.search) track by i.Id">
                                                            <span ng-bind="i.Nombre"></span>
                                                        </ui-select-choices>
                                                    </ui-select>
                                                </div>
                                            </div>

                                            <div class="form-group row" ng-show="sol.sedeDestino.Id === 0">
                                                <label class="col-lg-2 col-form-label">Plantilla Destino:</label>
                                                <div class="col-lg-10">
                                                    <div class="row">
                                                        <div class="file-box">
                                                            <div class="file">
                                                                <span class="corner"></span>
                                                                <a ng-click="agregarAdjDestino()">
                                                                    <div class="icon">
                                                                        <i ng-class="{'fas fa-file-excel': plantillaDestino === undefined ,'fas fa-times':plantillaDestino.size > 200000, 'fas fa-upload': plantillaDestino.size < 200000}"></i>
                                                                    </div>
                                                                </a>
                                                                <div class="file-name">
                                                                    {{plantillaDestino ? plantillaDestino.name : '--'}}
                                                                    <br/>
                                                                    <small>{{plantillaDestino ? (plantillaDestino.size | formatomb) : '--'}}</small>
                                                                    <div class="row" ng-show="plantillaDestino">
                                                                        <div class="col-md-12">
                                                                            <button ng-show="plantillaDestino.size < 200000"
                                                                                    type="button"
                                                                                    ng-click="subirPlantilla(2)"
                                                                                    class="btn btn-edi">
                                                                                Subir <i class="fas fa-spinner fa-spin"
                                                                                         ng-show="subiendoDestino"></i>
                                                                            </button>
                                                                            <button type="button" class="btn btn-red"
                                                                                    ng-click="borrarAdjDestino()">Borrar
                                                                            </button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <input id="adjDestino" type="file"
                                                               file-model="plantillaDestino"/>
                                                        <br/>
                                                        <button type="button" class="btn btn-edi"
                                                                ng-click="descargarPlantilla()"><i
                                                                class="fas fa-download"></i> Plantilla
                                                        </button>
                                                        <br/>
                                                        <div ng-show="mensajeCargaDestino!=''">
                                                            {{mensajeCargaDestino}} <span
                                                                ng-click="mensajeCargaDestino=''"> (x)</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-group row" ng-show="sol.destino.Id === 347">
                                                <label class="col-lg-2 col-form-label">Ubigeo Destino</label>
                                                <div class="col-lg-10">
                                                    <ui-select ng-model="sol.ubigeo_destino">
                                                        <ui-select-match placeholder="Seleccione Ubigeo...">
                                                            <span>{{$select.selected.Nombre}}</span>
                                                        </ui-select-match>
                                                        <ui-select-choices repeat="i in UbigeoDestino track by $index"
                                                                           refresh="obtenerUbigeo($select.search,2)"
                                                                           refresh-delay="0">
                                                            <span ng-bind="i.Nombre"></span>
                                                        </ui-select-choices>
                                                    </ui-select>
                                                </div>
                                            </div>
                                            <div class="form-group row" ng-show="false">
                                                <label class="col-lg-2 col-form-label">Adjunto:</label>
                                                <div class="col-lg-10">

                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label for="direccionDestino" class="col-lg-2 col-form-label">Dirección
                                                    Destino:</label>
                                                <div class="col-lg-10">
                                                <textarea id="direccionDestino"
                                                          class="form-control"
                                                          ng-model="sol.direccion_destino"
                                                          ng-disabled="sol.destino.Id !== 347"
                                                          placeholder="Dirección Destino"
                                                          rows="2"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                        <div slimscroll="{height:'150px'}" ng-if="ticket.Id">
                                            <div class="well" ng-repeat="x in destino_list">
                                                {{x.Destino}} <br/>
                                                {{x.DireccionDestino}} <br/>
                                                {{x.UbigeoDestino}}
                                            </div>
                                        </div>
                                    </fieldset>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-5">
                                    <div class="form-group">
                                        <label>Tipo de Paquete</label>
                                        <ui-select ng-model="sol.tipopaquete"
                                                   ng-disabled="ticket.Id ? true : false"
                                                   on-select="seleccionarTipoPaquete($select.selected)">
                                            <ui-select-match placeholder="Seleccione Tipo Paquete...">
                                                <span>{{$select.selected.Nombre}}</span>
                                            </ui-select-match>
                                            <ui-select-choices
                                                    repeat="i in (TipoPaquete | filter: $select.search) track by i.Id">
                                                <span ng-bind="i.Nombre"></span>
                                            </ui-select-choices>
                                        </ui-select>
                                    </div>
                                </div>
                                <div class="col-md-2"></div>
                                <div class="col-md-5" ng-show="sol.tiposervicio.Id === 343 && sol.sedeDestino.Id !== 0">
                                    <div class="form-group">
                                        <label>Usuario Destino:</label>
                                        <ui-select ng-model="sol.usuario_destino"
                                                   on-select="seleccionarUsuarioDestino($select.selected)">
                                            <ui-select-match placeholder="Seleccione Usuario Destino...">
                                                <span>{{$select.selected.Nombre}}</span>
                                            </ui-select-match>
                                            <ui-select-choices
                                                    repeat="i in (UsuarioDestino | filter: $select.search) track by i.Id">
                                                <span ng-bind="i.Nombre"></span>
                                            </ui-select-choices>
                                        </ui-select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </uib-tab>
                    <uib-tab index="1" heading="Items" ng-if="ticket.Id ? false : true" select="itemsSelect()">
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <div slimscroll="{height:'150px'}">
                                        <table class="table table-bordered">
                                            <thead>
                                            <tr>
                                                <th>#</th>
                                                <th>Destino</th>
                                                <th>Descripción</th>
                                                <th>Cantidad</th>
                                                <th>Und.Med.</th>
                                                <th>Acción</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="(key,x) in items">
                                                <th scope="row">{{key + 1}}</th>
                                                <td>{{sol.destino.Nombre}}</td>
                                                <td>{{x.Item}}</td>
                                                <td>{{x.Cantidad}}</td>
                                                <td>{{x.IdUnidadMedida | filtrarUnidadMedida:UnidadMedida}}</td>
                                                <td>
                                                    <button class="form-control" type="button"
                                                            ng-click="eliminarItem(x)">x
                                                    </button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="descripcion">Descripción:</label>
                                        <input type="text" ng-model="item.Item" placeholder="Descripción"
                                               class="form-control"/>
                                    </div>
                                    <div class="form-group">
                                        <label for="descripcion">Cantidad:</label>
                                        <input type="number" ng-model="item.Cantidad" placeholder="Cantidad"
                                               class="form-control"/>
                                    </div>
                                    <div class="form-group">
                                        <label for="descripcion">Und.Med.</label>
                                        <select class="form-control" name="repeatSelect" id="repeatSelect"
                                                ng-model="item.IdUnidadMedida">
                                            <option ng-repeat="option in UnidadMedida" value={{option.Id}}>
                                                {{option.Nombre}}
                                            </option>
                                        </select>
                                    </div>
                                    <button type="button"
                                            ng-click="item.destino = sol.destino.Nombre;agregarItems(item);item = {};">
                                        Agregar
                                    </button>
                                </div>
                            </div>
                        </div>
                    </uib-tab>
                    <uib-tab index="2" heading="Distribución" select="distribucion()" ng-show="ticket.Id">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="well">
                                    <div class="col-md-4">
                                        Leyenda: <i class="fas fa-home"></i> En Almacén <i class="fas fa-truck"
                                                                                           style="color: blue"></i> En
                                        Reparto <i class="far fa-check-square" style="color: green"></i> Entregado <i
                                            class="fas fa-circle" style="color: red"></i> Rezagado
                                    </div>
                                    <div class="col-md-1">
                                    </div>
                                    <div class="col-md-4">
                                        <div class="project-completion">
                                            <strong>{{porcentaje_txt}}</strong>
                                            <uib-progressbar class="progress-striped active" value="porcentaje_val" type="success"></uib-progressbar>
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="project-completion" style="width:180px">
                                            <canvas id="rpt1"></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br>
                        <div class="row">
                            <div class="col-md-12">
                                <table id="tbDistribucion" class="table table-striped table-bordered"
                                       style="width: 100%"></table>
                            </div>
                        </div>
                    </uib-tab>
                    <uib-tab index="3" heading="Log" select="abrirLog()" ng-show="ticket.Id">
                        <div class="panel-body">
                            <br>
                            <div class="activity-stream" slimscroll="{height:'150px'}">
                                <div class="stream" ng-repeat="x in log">
                                    <div class="stream-badge">
                                        <i class="fa fa-pencil"></i>
                                    </div>
                                    <div class="stream-panel">
                                        <div class="stream-info">
                                            <a href="#">
                                                <img src="../../../Assets/img/profesional.png"/>
                                                <span>{{x.NombreUsuario}}</span>
                                                <span class="date">{{x.FechaRegistro | formatoFecha}} - {{x.FechaRegistro | formatoFecha1}}</span>
                                            </a>
                                        </div>
                                        {{x.Descripcion}}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </uib-tab>
                </uib-tabset>
            </div>
            <div class="ibox-footer">
            </div>
        </div>
    </div>
</div>